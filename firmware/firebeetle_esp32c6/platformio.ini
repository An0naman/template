[platformio]
default_envs = firebeetle2_esp32c6_idf
boards_dir = ../../boards

[env]
monitor_speed = 115200
upload_speed = 460800

[env:firebeetle2_esp32c6_idf]
platform = espressif32
board = firebeetle2_esp32c6
framework = espidf

; ESP-IDF expects sources in main/, but PlatformIO defaults to src/.
; We override the source directory to use main/ directly via extra script.
extra_scripts = pre:fix_src_dir.py

; Use our existing toolchain instead of downloading new one
platform_packages = 
    toolchain-riscv32-esp @ file:///home/an0naman/Downloads/riscv32-esp-elf

board_build.mcu = esp32c6
board_build.f_cpu = 160000000L

; ESP-IDF specific settings
board_build.partitions = partitions.csv
board_build.filesystem = littlefs

build_flags = 
    -DBOARD_FIREBEETLE2_C6

; Libraries compatible with ESP-IDF
lib_deps =
    bblanchon/ArduinoJson @ ^7.0.0

monitor_filters = 
    esp32_exception_decoder
    time
    log2file

upload_protocol = esptool
debug_tool = esp-builtin
